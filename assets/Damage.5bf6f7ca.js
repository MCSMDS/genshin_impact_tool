var r="[big.js] ",e=r+"Invalid ",t=e+"decimal places",n={},o=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i;function i(r,e,t,n){var o=r.c;if(undefined===t&&(t=r.constructor.RM),0!==t&&1!==t&&2!==t&&3!==t)throw Error("[big.js] Invalid rounding mode");if(e<1)n=3===t&&(n||!!o[0])||0===e&&(1===t&&o[0]>=5||2===t&&(o[0]>5||5===o[0]&&(n||undefined!==o[1]))),o.length=1,n?(r.e=r.e-e+1,o[0]=1):o[0]=r.e=0;else if(e<o.length){if(n=1===t&&o[e]>=5||2===t&&(o[e]>5||5===o[e]&&(n||undefined!==o[e+1]||1&o[e-1]))||3===t&&(n||!!o[0]),o.length=e--,n)for(;++o[e]>9;)o[e]=0,e--||(++r.e,o.unshift(1));for(e=o.length;!o[--e];)o.pop()}return r}function s(r,e,t){var n=r.e,o=r.c.join(""),i=o.length;if(e)o=o.charAt(0)+(i>1?"."+o.slice(1):"")+(n<0?"e":"e+")+n;else if(n<0){for(;++n;)o="0"+o;o="0."+o}else if(n>0)if(++n>i)for(n-=i;n--;)o+="0";else n<i&&(o=o.slice(0,n)+"."+o.slice(n));else i>1&&(o=o.charAt(0)+"."+o.slice(1));return r.s<0&&t?"-"+o:o}n.abs=function(){var r=new this.constructor(this);return r.s=1,r},n.cmp=function(r){var e,t=this,n=t.c,o=(r=new t.constructor(r)).c,i=t.s,s=r.s,c=t.e,f=r.e;if(!n[0]||!o[0])return n[0]?i:o[0]?-s:0;if(i!=s)return i;if(e=i<0,c!=f)return c>f^e?1:-1;for(s=(c=n.length)<(f=o.length)?c:f,i=-1;++i<s;)if(n[i]!=o[i])return n[i]>o[i]^e?1:-1;return c==f?0:c>f^e?1:-1},n.div=function(r){var e=this,n=e.constructor,o=e.c,s=(r=new n(r)).c,c=e.s==r.s?1:-1,f=n.DP;if(f!==~~f||f<0||f>1e6)throw Error(t);if(!s[0])throw Error("[big.js] Division by zero");if(!o[0])return r.s=c,r.c=[r.e=0],r;var u,h,l,a,d,p=s.slice(),v=u=s.length,w=o.length,g=o.slice(0,u),m=g.length,b=r,E=b.c=[],j=0,O=f+(b.e=e.e-r.e)+1;for(b.s=c,c=O<0?0:O,p.unshift(0);m++<u;)g.push(0);do{for(l=0;l<10;l++){if(u!=(m=g.length))a=u>m?1:-1;else for(d=-1,a=0;++d<u;)if(s[d]!=g[d]){a=s[d]>g[d]?1:-1;break}if(!(a<0))break;for(h=m==u?s:p;m;){if(g[--m]<h[m]){for(d=m;d&&!g[--d];)g[d]=9;--g[d],g[m]+=10}g[m]-=h[m]}for(;!g[0];)g.shift()}E[j++]=a?l:++l,g[0]&&a?g[m]=o[v]||0:g=[o[v]]}while((v++<w||undefined!==g[0])&&c--);return E[0]||1==j||(E.shift(),b.e--,O--),j>O&&i(b,O,n.RM,undefined!==g[0]),b},n.eq=function(r){return 0===this.cmp(r)},n.gt=function(r){return this.cmp(r)>0},n.gte=function(r){return this.cmp(r)>-1},n.lt=function(r){return this.cmp(r)<0},n.lte=function(r){return this.cmp(r)<1},n.minus=n.sub=function(r){var e,t,n,o,i=this,s=i.constructor,c=i.s,f=(r=new s(r)).s;if(c!=f)return r.s=-f,i.plus(r);var u=i.c.slice(),h=i.e,l=r.c,a=r.e;if(!u[0]||!l[0])return l[0]?r.s=-f:u[0]?r=new s(i):r.s=1,r;if(c=h-a){for((o=c<0)?(c=-c,n=u):(a=h,n=l),n.reverse(),f=c;f--;)n.push(0);n.reverse()}else for(t=((o=u.length<l.length)?u:l).length,c=f=0;f<t;f++)if(u[f]!=l[f]){o=u[f]<l[f];break}if(o&&(n=u,u=l,l=n,r.s=-r.s),(f=(t=l.length)-(e=u.length))>0)for(;f--;)u[e++]=0;for(f=e;t>c;){if(u[--t]<l[t]){for(e=t;e&&!u[--e];)u[e]=9;--u[e],u[t]+=10}u[t]-=l[t]}for(;0===u[--f];)u.pop();for(;0===u[0];)u.shift(),--a;return u[0]||(r.s=1,u=[a=0]),r.c=u,r.e=a,r},n.mod=function(r){var e,t=this,n=t.constructor,o=t.s,i=(r=new n(r)).s;if(!r.c[0])throw Error("[big.js] Division by zero");return t.s=r.s=1,e=1==r.cmp(t),t.s=o,r.s=i,e?new n(t):(o=n.DP,i=n.RM,n.DP=n.RM=0,t=t.div(r),n.DP=o,n.RM=i,this.minus(t.times(r)))},n.plus=n.add=function(r){var e,t,n,o=this,i=o.constructor;if(r=new i(r),o.s!=r.s)return r.s=-r.s,o.minus(r);var s=o.e,c=o.c,f=r.e,u=r.c;if(!c[0]||!u[0])return u[0]||(c[0]?r=new i(o):r.s=o.s),r;if(c=c.slice(),e=s-f){for(e>0?(f=s,n=u):(e=-e,n=c),n.reverse();e--;)n.push(0);n.reverse()}for(c.length-u.length<0&&(n=u,u=c,c=n),e=u.length,t=0;e;c[e]%=10)t=(c[--e]=c[e]+u[e]+t)/10|0;for(t&&(c.unshift(t),++f),e=c.length;0===c[--e];)c.pop();return r.c=c,r.e=f,r},n.pow=function(r){var t=this,n=new t.constructor("1"),o=n,i=r<0;if(r!==~~r||r<-1e6||r>1e6)throw Error(e+"exponent");for(i&&(r=-r);1&r&&(o=o.times(t)),r>>=1;)t=t.times(t);return i?n.div(o):o},n.prec=function(r,t){if(r!==~~r||r<1||r>1e6)throw Error(e+"precision");return i(new this.constructor(this),r,t)},n.round=function(r,e){if(undefined===r)r=0;else if(r!==~~r||r<-1e6||r>1e6)throw Error(t);return i(new this.constructor(this),r+this.e+1,e)},n.sqrt=function(){var e,t,n,o=this,s=o.constructor,c=o.s,f=o.e,u=new s("0.5");if(!o.c[0])return new s(o);if(c<0)throw Error(r+"No square root");0===(c=Math.sqrt(o+""))||c===1/0?((t=o.c.join("")).length+f&1||(t+="0"),f=((f+1)/2|0)-(f<0||1&f),e=new s(((c=Math.sqrt(t))==1/0?"5e":(c=c.toExponential()).slice(0,c.indexOf("e")+1))+f)):e=new s(c+""),f=e.e+(s.DP+=4);do{n=e,e=u.times(n.plus(o.div(n)))}while(n.c.slice(0,f).join("")!==e.c.slice(0,f).join(""));return i(e,(s.DP-=4)+e.e+1,s.RM)},n.times=n.mul=function(r){var e,t=this,n=t.constructor,o=t.c,i=(r=new n(r)).c,s=o.length,c=i.length,f=t.e,u=r.e;if(r.s=t.s==r.s?1:-1,!o[0]||!i[0])return r.c=[r.e=0],r;for(r.e=f+u,s<c&&(e=o,o=i,i=e,u=s,s=c,c=u),e=new Array(u=s+c);u--;)e[u]=0;for(f=c;f--;){for(c=0,u=s+f;u>f;)c=e[u]+i[f]*o[u-f-1]+c,e[u--]=c%10,c=c/10|0;e[u]=c}for(c?++r.e:e.shift(),f=e.length;!e[--f];)e.pop();return r.c=e,r},n.toExponential=function(r,e){var n=this,o=n.c[0];if(undefined!==r){if(r!==~~r||r<0||r>1e6)throw Error(t);for(n=i(new n.constructor(n),++r,e);n.c.length<r;)n.c.push(0)}return s(n,!0,!!o)},n.toFixed=function(r,e){var n=this,o=n.c[0];if(undefined!==r){if(r!==~~r||r<0||r>1e6)throw Error(t);for(r=r+(n=i(new n.constructor(n),r+n.e+1,e)).e+1;n.c.length<r;)n.c.push(0)}return s(n,!1,!!o)},n.toJSON=n.toString=function(){var r=this,e=r.constructor;return s(r,r.e<=e.NE||r.e>=e.PE,!!r.c[0])},n.toNumber=function(){var e=Number(s(this,!0,!0));if(!0===this.constructor.strict&&!this.eq(e.toString()))throw Error(r+"Imprecise conversion");return e},n.toPrecision=function(r,t){var n=this,o=n.constructor,c=n.c[0];if(undefined!==r){if(r!==~~r||r<1||r>1e6)throw Error(e+"precision");for(n=i(new o(n),r,t);n.c.length<r;)n.c.push(0)}return s(n,r<=n.e||n.e<=o.NE||n.e>=o.PE,!!c)},n.valueOf=function(){var e=this,t=e.constructor;if(!0===t.strict)throw Error(r+"valueOf disallowed");return s(e,e.e<=t.NE||e.e>=t.PE,!0)};var c=function r(){function t(n){var i=this;if(!(i instanceof t))return undefined===n?r():new t(n);if(n instanceof t)i.s=n.s,i.e=n.e,i.c=n.c.slice();else{if("string"!=typeof n){if(!0===t.strict)throw TypeError(e+"number");n=0===n&&1/n<0?"-0":String(n)}!function(r,t){var n,i,s;if(!o.test(t))throw Error(e+"number");r.s="-"==t.charAt(0)?(t=t.slice(1),-1):1,(n=t.indexOf("."))>-1&&(t=t.replace(".",""));(i=t.search(/e/i))>0?(n<0&&(n=i),n+=+t.slice(i+1),t=t.substring(0,i)):n<0&&(n=t.length);for(s=t.length,i=0;i<s&&"0"==t.charAt(i);)++i;if(i==s)r.c=[r.e=0];else{for(;s>0&&"0"==t.charAt(--s););for(r.e=n-i-1,r.c=[],n=0;i<=s;)r.c[n++]=+t.charAt(i++)}}(i,n)}i.constructor=t}return t.prototype=n,t.DP=20,t.RM=1,t.NE=-7,t.PE=21,t.strict=false,t.roundDown=0,t.roundHalfUp=1,t.roundHalfEven=2,t.roundUp=3,t}();const f=(r,e)=>c(r).plus(e).toNumber(),u=(r,e)=>c(r).times(e).toNumber();let h={flower:{"生命值":4780},feather:{"攻击力":311},sand:{"攻击力%":.466},cup:{"攻击力%":.466,"岩元素伤害加成":.466,"水元素伤害加成":.466,"雷元素伤害加成":.466,"风元素伤害加成":.466,"火元素伤害加成":.466,"冰元素伤害加成":.466,"物理伤害加成":.583},head:{"攻击力%":.466,"暴击率":.311,"暴击伤害":.622},second:{"攻击力%":.058,"暴击率":.039,"暴击伤害":.078,"攻击力":19}},l=(r,e,t,n,o,i,s,h)=>((...r)=>r.reduce(((r,e)=>r.times(e)),c(1)).toNumber())(f(u(f(r,e),f(1,t)),n),o,f(1,i),f(1,u(Math.min(s,1),h))),a=r=>{var e={};for(var t of Object.values(r))for(var[n,o]of Object.entries(t))e[n]=(e[n]||0)+o;return e},d=((...r)=>r.reduce(((r,e)=>{const t=[];return r.forEach((r=>e.forEach((e=>t.push([...r,e]))))),t}),[[]]))(Object.entries(h.flower),Object.entries(h.feather),Object.entries(h.sand),Object.entries(h.cup),Object.entries(h.head));function p(r,e){var t={flower:{},feather:{},sand:{},cup:{},head:{}};e=e.replace("phys","物理伤害加成").replace("雷","雷元素伤害加成").replace("岩","岩元素伤害加成").replace("风","风元素伤害加成").replace("水","水元素伤害加成").replace("火","火元素伤害加成");for(var n=0;n<45;n++)Object.keys(h.second).map((function(n){var o=JSON.parse(JSON.stringify(t));for(var i in o){const r=o[i],e=Object.values(r);if((4==e.length?r[n]:!r[n])&&(r[n]||0)<6&&e.reduce(((r,e)=>r+e),0)<9){r[n]=(r[n]||0)+1;break}}var s=a(o);return[l(r["角色攻击力"]||0,r["武器攻击力"]||0,f(u(h.second["攻击力%"],s["攻击力%"]||0),r["攻击力%"]||0),f(u(h.second["攻击力"],s["攻击力"]||0),r["攻击力"]||0),r["技能倍率"]||0,r[e]||0,f(u(h.second["暴击率"],s["暴击率"]||0),r["暴击率"]||0),f(u(h.second["暴击伤害"],s["暴击伤害"]||0),r["暴击伤害"]||0)),()=>t=o]})).sort(((r,e)=>e[0]-r[0]))[0][1]();for(var[o,i]of Object.entries(a(t)))r[o]=f(r[o]||0,u(h.second[o],i));return[l(r["角色攻击力"]||0,r["武器攻击力"]||0,r["攻击力%"]||0,r["攻击力"]||0,r["技能倍率"]||0,r[e]||0,r["暴击率"]||0,r["暴击伤害"]||0),r]}const v=(r,e,t,n,o)=>{let i=[];for(let u of d){let h={"角色攻击力":e,"武器攻击力":t,"技能倍率":n};for(var[s,c]of o)h[s]=f(h[s]||0,c);for(var[s,c]of u)h[s]=f(h[s]||0,c);i.push(p(h,r))}return[...i].sort(((r,e)=>e[0]-r[0]))[0]};export{c as B,v as g};
